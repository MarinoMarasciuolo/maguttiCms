$((function(){var a=$("#filemanager");$(".filemanager-select").on("click",(function(e){e.preventDefault(),a.modal("show");var n=$(this).data("input"),i=$("input[name="+n+"]").val();0!=i&&$("#file-manager-list").click(),$("input[name=file-input]",a).val(n),$("input[name=file-value]",a).val(i)})),$("input[name=upload-input]",a).uploadifive({auto:!0,queueID:"queue-modal",uploadScript:urlAjaxHandlerCms+"filemanager/upload",onAddQueueItem:function(a){this.data("uploadifive").settings.formData={_token:$("[name=_token]").val()}},onUploadComplete:function(e,n){var i=jQuery.parseJSON(n);i.data,$("input[name=file-value]",a).val(i.id),$("#file-manager-list").click(),$("#sidebar-content").empty()}}),$("#file-manager-list").on("click",(function(e){var n=$(".filemanager-select").data("input"),i=parseInt($("input[name="+n+"]").val())?parseInt($("input[name="+n+"]").val()):"",t="".concat(urlAjaxHandlerCms,"filemanager/list/").concat(i);$("#tab-images-gallery").load(t,(function(){$(".modal-footer",a).removeClass("hidden");var e=$("input[name=file-value]").val();0!=e&&($("#media-id-"+e).addClass("is-active"),$("#sidebar-content").load(urlAjaxHandlerCms+"filemanager/edit/"+e))}))})),$(document).on("click",".filemanager-list a",(function(e){e.preventDefault(),$(".filemanager-list a").removeClass("is-active"),$("input[name=file-value]",a).val($(this).data("id")),$("#sidebar-content").load(urlAjaxHandlerCms+"filemanager/edit/"+$(this).data("id")),$(this).addClass("is-active")})),$(document).on("submit","#filemanager-edit-form",(function(a){a.preventDefault();var e=$(this);$.ajax({type:"POST",url:e.attr("action"),data:e.serialize(),dataType:"json",success:function(a){$.notify(a.message,"success")},error:function(a){$.notify("Error.")}})})),$(".reset-image",a).on("click",(function(e){e.preventDefault(),$(".filemanager-list a").removeClass("is-active"),$("input[name=file-value]",a).val(0)})),$(".confirm-image",a).on("click",(function(e){e.preventDefault(),$("input[name="+$("input[name=file-input]",a).val()+"]").val($("input[name=file-value]",a).val()),a.modal("hide")})),$("#filemanager").on("hidden.bs.modal",(function(){$("#file-manager-upload").click(),$("#tab-images-gallery").html('<div class="loading text-center">\n      <i class="fa fa-spinner fa-pulse fa-3x fa-fw"></i>\n      <span class="sr-only">Loading...</span>\n    </div>'),$("#sidebar-content").html("")}))}));