$((function(){var a=$("#filemanager");$(".filemanager-select").on("click",(function(e){e.preventDefault(),a.modal("show");var i=$(this).data("input"),n=$("input[name="+i+"]").val();0!=n&&$("#file-manager-list").click(),$("input[name=file-input]",a).val(i),$("input[name=file-value]",a).val(n)})),$("input[name=upload-input]",a).uploadifive({auto:!0,queueID:"queue-modal",uploadScript:urlAjaxHandlerCms+"filemanager/upload",onAddQueueItem:function(a){this.data("uploadifive").settings.formData={_token:$("[name=_token]").val()}},onUploadComplete:function(e,i){var n=jQuery.parseJSON(i);n.data,$("input[name=file-value]",a).val(n.id),$("#file-manager-list").trigger("click"),$("#sidebar-content").empty()}}),$("#file-manager-list").on("click",(function(e){var i=$(".filemanager-select").data("input"),n=parseInt($("input[name="+i+"]").val())?parseInt($("input[name="+i+"]").val()):"",t="".concat(urlAjaxHandlerCms,"filemanager/list/").concat(n);$("#tab-images-gallery").load(t,(function(){$(".modal-footer",a).removeClass("visually-hidden");var e=$("input[name=file-value]").val();0!=e&&($("#file-manager-upload",a).removeClass("active"),$("#file-manager-list",a).addClass("active"),$("#tab-upload",a).removeClass("active show"),$("#tab-images",a).addClass("active show"),$("#media-id-"+e).addClass("active"),$("#sidebar-content").load(urlAjaxHandlerCms+"filemanager/edit/"+e))}))})),$(document).on("click",".filemanager-list .thumbnail-item",(function(e){e.preventDefault(),$(".filemanager-list .thumbnail-item").removeClass("active"),$("input[name=file-value]",a).val($(this).data("id")),$("#sidebar-content").load(urlAjaxHandlerCms+"filemanager/edit/"+$(this).data("id")),$(this).addClass("active")})),$(document).on("submit","#filemanager-edit-form",(function(a){a.preventDefault();var e=$(this);$.ajax({type:"POST",url:e.attr("action"),data:e.serialize(),dataType:"json",success:function(a){$.notify(a.message,"success"),$("#file-manager-list").trigger("click")},error:function(a){$.notify("Error.")}})})),$(".reset-image",a).on("click",(function(e){e.preventDefault(),$(".filemanager-list a").removeClass("active"),$("input[name=file-value]",a).val(0)})),$(".confirm-image",a).on("click",(function(e){e.preventDefault(),$("input[name="+$("input[name=file-input]",a).val()+"]").val($("input[name=file-value]",a).val()),a.modal("hide")})),$("#filemanager").on("hidden.bs.modal",(function(){$("#tab-upload",a).addClass("active show"),$("#tab-images",a).removeClass("active show"),$("#file-manager-upload",a).addClass("active"),$("#file-manager-list",a).removeClass("active"),$("#tab-images-gallery").html('<div class="loading text-center">\n      <i class="fa fa-spinner fa-pulse fa-3x fa-fw"></i>\n      <span class="sr-only">Loading...</span>\n    </div>'),$("#sidebar-content").html("")}))}));